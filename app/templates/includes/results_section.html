<section class="results-section" id="results-section" style="display: none;">
                <div class="results-actions">
                    <button type="button" id="analyze-new-btn" class="action-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor" />
                        </svg>
                        Analyze New Track
                    </button>
                    <button type="button" id="delete-track-btn" class="action-button delete-button">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
                                fill="currentColor" />
                        </svg>
                        Delete Track
                    </button>
                </div>

                <h2>Analysis Results for <span id="filename"></span></h2>

                <div class="overall-score">
                    <div class="score-circle">
                        <!-- Animated arcs -->
                        <div class="score-arc"></div>
                        <div class="score-arc"></div>
                        <div class="score-arc"></div>

                        <!-- Progress marks that will be populated by JS -->
                        <div class="score-circle-marks"></div>

                        <!-- Particles container for score animations -->
                        <div class="score-particles"></div>

                        <span id="overall-score">0</span>
                    </div>
                    <p>Overall Mix Score</p>
                </div>

                <div class="tabs" role="tablist">
                    <button type="button" class="tab-button active" data-tab="frequency" role="tab" aria-label="Frequency Balance"
                        aria-selected="true">Frequency Balance</button>
                    <button type="button" class="tab-button" data-tab="dynamics" role="tab" aria-label="Dynamics"
                        aria-selected="false">Dynamics</button>
                    <button type="button" class="tab-button" data-tab="stereo" role="tab" aria-label="Stereo Field"
                        aria-selected="false">Stereo Field</button>
                    <button type="button" class="tab-button" data-tab="clarity" role="tab" aria-label="Clarity"
                        aria-selected="false">Clarity</button>
                    <button type="button" class="tab-button" data-tab="harmonic" role="tab" aria-label="Harmonic"
                        aria-selected="false">Harmonic</button>
                    <button type="button" class="tab-button" data-tab="transients" role="tab" aria-label="Transients"
                        aria-selected="false">Transients</button>
                    <button type="button" class="tab-button" data-tab="spatial" role="tab" aria-label="3D Spatial"
                        aria-selected="false">3D Spatial</button>
                    <button type="button" class="tab-button" data-tab="visualizations" role="tab" aria-label="Visualizations"
                        aria-selected="false">Visualizations</button>
                    <button type="button" class="tab-button" data-tab="ai-insights" role="tab" aria-label="AI Insights"
                        aria-selected="false">AI Insights</button>
                </div>

                <div class="tab-content">
                    <!-- Frequency Balance Tab -->
                    <div class="tab-pane active" id="frequency-tab" role="tabpanel">
                        <div class="score-card">
                            <!-- Frequency meter element -->
                            <!-- <div class="frequency-meter"></div> -->
                            <!-- Particle container for animated effects -->
                            <div class="frequency-particles"></div>

                            <h3>Frequency Analysis Overview</h3>
                            <div class="score-value" id="frequency-score" data-label="/100">0</div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="frequency-analysis"></ul>
                        </div>
                        <div class="ai-frequency-card">
                            <div class="ai-header">
                                <h3>AI Frequency Analysis</h3>
                                <p class="ai-powered-by">Powered by <span id="ai-model-used-freq">AI Model</span></p>
                            </div>
                            <div class="ai-section-card">
                                <h4>Frequency Issues</h4>
                                <ul id="ai-frequency-issues"></ul>
                            </div>
                            <div class="ai-section-card">
                                <h4>Frequency Recommendations</h4>
                                <ul id="ai-frequency-recommendations"></ul>
                            </div>
                            <div id="ai-freq-error" class="ai-error" style="display: none;">
                                <p>AI frequency analysis is not available.</p>
                            </div>
                            <div class="ai-description">
                                <p>Our advanced AI analyzes your mix's frequency spectrum to identify specific EQ issues
                                    and provide targeted recommendations for better frequency balance.</p>
                            </div>
                        </div>
                        <div class="chart-container">
                            <h3>Frequency Band Energy</h3>
                            <canvas id="frequency-chart"></canvas>
                        </div>
                    </div>

                    <!-- Dynamics Tab -->
                    <div class="tab-pane" id="dynamics-tab">
                        <div class="score-card">
                            <!-- Dynamic range meter element -->
                            <!-- <div class="dynamics-meter"></div> -->

                            <!-- Particle container for animated effects -->
                            <div class="dynamics-particles"></div>

                            <!-- Sound wave visualization -->
                            <div class="dynamics-wave"></div>

                            <h3>Dynamic Range Details</h3>
                            <div class="score-value" id="dynamics-score" data-label="/100">0</div>
                        </div>
                        <div class="metrics-container">
                            <div class="metric">
                                <h4>Dynamic Range</h4>
                                <div class="metric-value" id="dynamic-range">0 dB</div>
                            </div>
                            <div class="metric">
                                <h4>Crest Factor</h4>
                                <div class="metric-value" id="crest-factor">0 dB</div>
                            </div>
                            <div class="metric">
                                <h4>Peak to Loudness Ratio</h4>
                                <div class="metric-value" id="plr">0 dB</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="dynamics-analysis"></ul>
                        </div>
                    </div>

                    <!-- Stereo Field Tab -->
                    <div class="tab-pane" id="stereo-tab">
                        <div class="score-container">
                            <div class="score-card">
                                <!-- Width meter element -->
                                <!-- <div class="stereo-width-meter"></div> -->

                                <!-- Particle container for animated effects -->
                                <div class="stereo-width-particles"></div>

                                <h3>Stereo Imaging Insights</h3>
                                <div class="score-value" id="width-score" data-label="/100">0</div>
                            </div>
                            <div class="score-card">
                                <!-- Phase meter element -->
                                <!-- <div class="stereo-phase-meter"></div> -->

                                <!-- Particle container for animated effects -->
                                <div class="stereo-phase-particles"></div>

                                <!-- Phase wave visualization -->
                                <div class="stereo-phase-wave"></div>

                                <h3>Phase Score</h3>
                                <div class="score-value" id="phase-score" data-label="/100">0</div>
                            </div>
                        </div>
                        <div class="metrics-container">
                            <div class="metric">
                                <h4>Channel Correlation</h4>
                                <div class="metric-value" id="correlation">0</div>
                            </div>
                            <div class="metric">
                                <h4>Mid/Side Ratio</h4>
                                <div class="metric-value" id="mid-side-ratio">0</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="stereo-analysis"></ul>
                        </div>
                    </div>

                    <!-- Clarity Tab -->
                    <div class="tab-pane" id="clarity-tab">
                        <div class="score-card">
                            <h3>Clarity Score</h3>
                            <div class="score-value" id="clarity-score">0</div>
                        </div>
                        <div class="analysis-description">
                            <p>Clarity analysis measures how distinct and well-defined the elements in your mix sound. A
                                clear mix allows each instrument and vocal to be heard without being masked by other
                                elements, creating a professional sound with proper separation and definition across the
                                frequency spectrum.</p>
                        </div>
                        <div class="metrics-container">
                            <div class="metric">
                                <h4>Spectral Contrast</h4>
                                <div class="metric-value" id="spectral-contrast">0</div>
                                <p class="metric-description">Measures the distinction between peaks and valleys in the
                                    frequency spectrum</p>
                            </div>
                            <div class="metric">
                                <h4>Spectral Flatness</h4>
                                <div class="metric-value" id="spectral-flatness">0</div>
                                <p class="metric-description">Indicates how noise-like or tone-like your mix is,
                                    affecting perceived clarity</p>
                            </div>
                            <div class="metric">
                                <h4>Spectral Centroid</h4>
                                <div class="metric-value" id="spectral-centroid">0 Hz</div>
                                <p class="metric-description">The "center of gravity" of your sound's frequency spectrum
                                </p>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="clarity-analysis"></ul>
                        </div>
                        <div class="chart-container">
                            <h3>Clarity Factors Visualization</h3>
                            <div class="clarity-legend">
                                <div class="legend-item">
                                    <span class="legend-color legend-color-blue"></span>
                                    <span>Spectral Contrast: Separation between elements</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color legend-color-red"></span>
                                    <span>Tonal Focus: Musical content vs. noise</span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color legend-color-green"></span>
                                    <span>Frequency Balance: Distribution across spectrum</span>
                                </div>
                            </div>
                            <canvas id="clarity-chart"></canvas>
                        </div>
                    </div>

                    <!-- Harmonic Analysis Tab -->
                    <div class="tab-pane" id="harmonic-tab">
                        <div class="score-card">
                            <h3>Harmonic Analysis Overview</h3>
                            <div class="score-value" id="harmonic-key">Key: C</div>
                        </div>
                        <div class="metrics-container">
                            <div class="metric">
                                <h4>Harmonic Complexity</h4>
                                <div class="metric-value" id="harmonic-complexity">0%</div>
                            </div>
                            <div class="metric">
                                <h4>Key Consistency</h4>
                                <div class="metric-value" id="key-consistency">0%</div>
                            </div>
                            <div class="metric">
                                <h4>Chord Changes</h4>
                                <div class="metric-value" id="chord-changes">0/min</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="harmonic-analysis"></ul>
                        </div>
                        <div class="visualization-container" title="Click to enlarge">
                            <img id="chromagram-img" src=" "
                                alt="Chromagram visualization showing harmonic content and key distribution">
                        </div>
                    </div>

                    <!-- Transients Tab -->
                    <div class="tab-pane" id="transients-tab">
                        <div class="score-card">
                            <h3>Transient Analysis Details</h3>
                            <div class="score-value" id="transients-score">0</div>
                        </div>
                        <div class="metrics-container">
                            <div class="metric">
                                <h4>Attack Time</h4>
                                <div class="metric-value" id="attack-time">0 ms</div>
                            </div>
                            <div class="metric">
                                <h4>Transient Density</h4>
                                <div class="metric-value" id="transient-density">0</div>
                            </div>
                            <div class="metric">
                                <h4>Percussion Energy</h4>
                                <div class="metric-value" id="percussion-energy">0%</div>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Analysis</h3>
                            <ul id="transients-analysis"></ul>
                        </div>
                        <div class="chart-container">
                            <h3>Transient Detection</h3>
                            <canvas id="transients-chart"></canvas>
                        </div>
                    </div>

                    <!-- 3D Spatial Analysis Tab -->
                    <div class="tab-pane" id="spatial-tab">
                        <div class="score-card">
                            <h3>3D Spatial Analysis Overview</h3>
                            <div class="score-value" id="spatial-score">0</div>
                            <p class="score-description">Overall rating of your mix's three-dimensional spatial
                                characteristics and immersive qualities</p>
                        </div>
                        <div class="metrics-container">
                            <div class="metric"
                                title="Measures how well your mix utilizes the vertical space through frequency distribution and harmonic content">
                                <h4>Height Perception</h4>
                                <div class="metric-value" id="height-score">0%</div>
                                <p class="metric-description">High-frequency presence and vertical space utilization for
                                    enhanced listening experience</p>
                            </div>
                            <div class="metric"
                                title="Evaluates the perceived front-to-back dimension of your mix through phase relationships and reverb">
                                <h4>Depth Perception</h4>
                                <div class="metric-value" id="depth-score">0%</div>
                                <p class="metric-description">Front-to-back layering and spatial positioning for
                                    immersive soundstage</p>
                            </div>
                            <div class="metric"
                                title="Analyzes the stability and consistency of the stereo field across frequencies">
                                <h4>Width Consistency</h4>
                                <div class="metric-value" id="width-consistency">0%</div>
                                <p class="metric-description">Stereo field stability and balance across the frequency
                                    spectrum</p>
                            </div>
                        </div>
                        <div class="analysis-card">
                            <h3>Spatial Analysis</h3>
                            <div class="analysis-description">
                                <p>This innovative analysis evaluates how your mix utilizes three-dimensional space,
                                    crucial for creating an immersive listening experience on modern playback systems
                                    including headphones, speakers, and surround environments.</p>
                            </div>
                            <ul id="spatial-analysis"></ul>
                        </div>
                        <h3>3D Spatial Field</h3>
                        <p class="visualization-help">This advanced visualization shows how your mix utilizes the full
                            three-dimensional space:</p>

                        <div class="visualization-container"
                            title="Interactive 3D visualization of your mix's spatial characteristics">
                            <ul class="visualization-legend">
                                <li><strong>X-axis:</strong> Left-right stereo positioning</li>
                                <li><strong>Y-axis:</strong> Front-back depth perception</li>
                                <li><strong>Z-axis:</strong> Vertical frequency distribution</li>
                                <li><strong>Color intensity:</strong> Energy distribution in the stereo field</li>
                            </ul>
                            <div id="spatial-field-container" class="visualization-3d-container">
                                <img id="spatial-field-img" src=""
                                    alt="3D spatial field visualization showing height, depth, and width characteristics"
                                    style="display: none;">
                                <!-- Direct iframe to interactive 3D visualization -->
                                <iframe id="spatial-field-iframe" src=""
                                    style="width: 100%; height: 700px; border: none; display: block;"
                                    title="Interactive 3D spatial audio visualization"></iframe>
                                <div class="interactive-controls">
                                    <p class="interactive-tip">Tip: Use your mouse to rotate and zoom the 3D
                                        visualization</p>
                                </div>
                            </div>
                            <button type="button" id="regenerate-spatial-btn" class="regenerate-btn"
                                title="Regenerate with enhanced detection"
                                onclick="regenerateSpatialField(document.getElementById('filename').textContent.trim())">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16">
                                    <path
                                        d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                                        fill="currentColor" />
                                </svg>
                                Regenerate Visualization
                            </button>
                        </div>
                    </div>

                    <!-- Visualizations Tab -->
                    <div class="tab-pane" id="visualizations-tab">
                        <div class="visualization-grid">
                            <div class="visualization-card">
                                <h3>Waveform</h3>
                                <div class="visualization-container" title="Click to enlarge">
                                    <img id="waveform-img" src=""
                                        alt="Audio waveform visualization showing amplitude over time"
                                        data-track-name="Waveform">
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Spectrogram</h3>
                                <div class="visualization-container" title="Click to enlarge">
                                    <img id="spectrogram-img" src=""
                                        alt="Spectrogram visualization showing frequency content over time">
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Frequency Spectrum</h3>
                                <div class="visualization-container" title="Click to enlarge">
                                    <img id="spectrum-img" src=""
                                        alt="Frequency spectrum visualization showing energy distribution across frequencies">
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Chromagram</h3>
                                <div class="visualization-container" title="Click to enlarge">
                                    <img id="chromagram-viz-img" src=""
                                        alt="Chromagram visualization showing harmonic content and key distribution">
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Stereo Field</h3>
                                <div id="stereo-field-container" class="visualization-container"
                                    title="Click to enlarge">
                                    <img id="stereo-field-img" src=""
                                        alt="Stereo field visualization showing spatial distribution between left and right channels">
                                    <button type="button" id="regenerate-stereo-btn" class="regenerate-btn"
                                        title="Regenerate with enhanced detection"
                                        onclick="regenerateStereoField(document.getElementById('filename').textContent.trim())">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path
                                                d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                                        </svg>
                                        <span class="sr-only">Regenerate stereo field visualization</span>
                                    </button>
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Vectorscope</h3>
                                <div id="vectorscope-container" class="visualization-container"
                                    title="Click to enlarge">
                                    <img id="vectorscope-img" src=""
                                        alt="Vectorscope/Goniometer visualization showing phase correlation between left and right channels">
                                </div>
                            </div>
                            <div class="visualization-card">
                                <h3>Dynamic Range</h3>
                                <div id="dynamic-range-container" class="visualization-container"
                                    title="Click to enlarge">
                                    <img id="dynamic-range-img" src=""
                                        alt="Dynamic range visualization showing compression over time and frequency">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights Tab -->
                    <div class="tab-pane" id="ai-insights-tab">
                        <div class="ai-insights-container">
                            <div class="ai-header">
                                <h3>AI-Powered Mix Analysis</h3>
                                <p class="ai-powered-by">Powered by <span id="ai-model-used">AI Model</span></p>
                                <p class="ai-description">Comprehensive audio analysis powered by advanced AI models
                                    that provide professional mixing and mastering insights tailored to your track</p>
                            </div>

                            <div class="ai-summary-card">
                                <h4>Summary</h4>
                                <p id="ai-summary">Loading AI analysis...</p>
                            </div>

                            <div class="ai-genre-card">
                                <h4>Genre Context</h4>
                                <p id="ai-genre-context">Loading genre analysis...</p>
                            </div>

                            <div class="ai-genre-card">
                                <h4>Subgenre & Style-Specific Context</h4>
                                <p id="ai-subgenre-context">Loading subgenre analysis...</p>
                            </div>

                            <div class="ai-sections-container">
                                <div class="ai-section-card">
                                    <h4>Strengths</h4>
                                    <ul id="ai-strengths"></ul>
                                </div>

                                <div class="ai-section-card">
                                    <h4>Areas for Improvement</h4>
                                    <ul id="ai-weaknesses"></ul>
                                </div>
                            </div>

                            <div class="ai-suggestions-card">
                                <h4>Suggestions</h4>
                                <ul id="ai-suggestions"></ul>
                            </div>

                            <div class="ai-reference-card">
                                <h4>Reference Tracks</h4>
                                <ul id="ai-reference-tracks"></ul>
                            </div>

                            <div class="ai-processing-card">
                                <h4>Processing Recommendations</h4>
                                <ul id="ai-processing-recommendations"></ul>
                            </div>

                            <div class="ai-translation-card">
                                <h4>Mix Translation Recommendations</h4>
                                <ul id="ai-translation-recommendations"></ul>
                            </div>

                            <div id="ai-error" class="ai-error" style="display: none;">
                                <p>AI analysis is not available. Please check your OpenAI API key.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
